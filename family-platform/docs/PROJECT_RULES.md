# 🏠 家庭网站交互平台 - 项目规则与开发指南

> **创建日期：** 2025-01-12  
> **版本：** v1.0  
> **状态：** 基础设施完成，进入前端设计优化阶段

## 📋 项目概述

**项目名称：** 家庭网站交互平台  
**项目目标：** 构建现代化的家庭知识库与互动平台  
**技术定位：** 全栈 Web 应用，支持多用户家庭协作

## 🏗️ 技术架构规范

### ✅ 已确认技术栈

| 技术分类 | 选择方案 | 版本 | 状态 |
|---------|---------|------|------|
| **前端框架** | Next.js | 15.3.3 | ✅ 已部署 |
| **开发语言** | TypeScript | ^5.0 | ✅ 已配置 |
| **UI 框架** | Tailwind CSS | ^4.0 | ✅ 已配置 |
| **组件库** | Headless UI | ^2.2.4 | ✅ 已安装 |
| **图标库** | Heroicons | ^2.2.0 | ✅ 已安装 |
| **后端服务** | Supabase | - | ✅ 已集成 |
| **数据库** | PostgreSQL (Supabase) | - | ✅ 已配置 |
| **认证系统** | Supabase Auth | - | ✅ 已集成 |
| **部署平台** | Vercel | - | ✅ 已部署 |
| **版本控制** | Git + GitHub | - | ✅ 已配置 |

### 🌐 架构优势

- **现代化全栈：** Next.js App Router + Supabase SSR
- **零服务器维护：** 完全基于云服务的架构  
- **自动扩展：** Vercel + Supabase 自动处理流量波动
- **类型安全：** TypeScript 提供完整的类型检查
- **SEO 友好：** Next.js SSR/SSG 支持搜索引擎优化

## 🎯 开发阶段规划

### 🚀 当前状态：基础设施完成

**已完成工作：**
- ✅ 项目架构搭建
- ✅ 依赖管理清理
- ✅ Supabase 数据库集成
- ✅ Vercel 自动部署配置
- ✅ TypeScript 类型系统
- ✅ 基础页面结构（首页、登录、注册）

### 📅 开发计划时间线

#### **第一阶段：设计系统建设（1-2天）**
- [ ] 创建设计令牌文件（颜色、字体、间距规范）
- [ ] 重构 Tailwind 配置（自定义主题色彩）
- [ ] 建立组件库基础（Button、Card、Modal 等）
- [ ] 响应式设计系统

#### **第二阶段：核心功能开发（3-5天）**
- [ ] 完善用户认证系统（登录、注册、个人资料）
- [ ] 家庭成员管理（成员邀请、权限管理）
- [ ] 内容发布系统（文章、照片、视频分享）
- [ ] 数据库表结构设计

#### **第三阶段：体验优化（2-3天）**
- [ ] 响应式设计完善（移动端适配）
- [ ] 交互动画（页面切换、加载状态）
- [ ] 性能监控（加载速度、用户体验指标）
- [ ] SEO 优化

## 🎨 设计系统规范

### 🌈 色彩系统
```css
/* 主色调 - 温暖家庭感 */
--primary-50: #fff7ed;    /* 最浅橙 */
--primary-500: #f97316;   /* 主橙色 */
--primary-900: #9a3412;   /* 深橙色 */

/* 辅助色 - 稳重可靠 */
--secondary-50: #eff6ff;  /* 最浅蓝 */
--secondary-500: #3b82f6; /* 主蓝色 */
--secondary-900: #1e3a8a; /* 深蓝色 */

/* 功能色 */
--success: #10b981;       /* 成功绿 */
--warning: #f59e0b;       /* 警告黄 */
--error: #ef4444;         /* 错误红 */
```

### 📝 字体系统
```css
/* 中文优先字体栈 */
font-family: 
  "PingFang SC", 
  "Hiragino Sans GB", 
  "Microsoft YaHei", 
  "Helvetica Neue", 
  Arial, 
  sans-serif;
```

### 📐 空间系统
- **基准单位：** 4px (0.25rem)
- **组件间距：** 8px, 16px, 24px, 32px
- **页面边距：** 16px (移动端), 24px (平板), 32px (桌面)

## 📱 响应式设计规范

### 🔧 断点定义
```javascript
const breakpoints = {
  sm: '640px',   // 手机横屏
  md: '768px',   // 平板竖屏
  lg: '1024px',  // 小桌面
  xl: '1280px',  // 大桌面
  '2xl': '1536px', // 超大屏
}
```

### 📋 布局规范
- **移动端优先：** Mobile-first 设计原则
- **触摸友好：** 按钮最小 44px 点击区域
- **导航方式：** 顶部导航 + 移动端底部导航
- **内容展示：** 卡片式布局，易于扫描

## ⚡ 性能标准

### 📊 关键指标
- **首屏加载时间：** < 1.5s
- **交互响应时间：** < 100ms
- **Lighthouse 评分：** > 90分
- **Core Web Vitals：** 全部通过

### 🛠️ 优化策略
- **图片优化：** Next.js Image 组件 + WebP 格式
- **代码分割：** 动态导入 + React.lazy
- **缓存策略：** Supabase 查询缓存 + SWR
- **Bundle 优化：** Tree-shaking + 压缩

## 🔒 安全与质量规范

### 🛡️ 安全要求
- **认证系统：** 使用 Supabase Auth，支持多种登录方式
- **数据权限：** 基于 RLS (Row Level Security) 的数据访问控制
- **输入验证：** 前后端双重验证，防止 XSS 和 SQL 注入
- **HTTPS：** 全站 HTTPS，敏感数据加密传输

### ✅ 代码质量
- **TypeScript：** 严格模式，完整类型定义
- **ESLint：** 使用 Next.js 推荐规则
- **Prettier：** 统一代码格式
- **Git 提交：** 使用语义化提交信息

## 📂 项目结构规范

```
family-platform/
├── docs/                    # 项目文档
│   ├── PROJECT_RULES.md     # 项目规则 (本文件)
│   ├── API.md               # API 文档
│   └── DEPLOYMENT.md        # 部署文档
├── public/                  # 静态资源
├── src/
│   ├── app/                 # Next.js App Router 页面
│   ├── components/          # React 组件
│   │   ├── ui/              # 基础 UI 组件
│   │   ├── layout/          # 布局组件
│   │   └── features/        # 功能组件
│   ├── lib/                 # 工具库
│   │   ├── supabase.ts      # Supabase 客户端
│   │   ├── utils.ts         # 工具函数
│   │   └── constants.ts     # 常量定义
│   ├── types/               # TypeScript 类型定义
│   ├── hooks/               # 自定义 React Hooks
│   └── styles/              # 样式文件
├── supabase/                # 数据库相关
│   ├── migrations/          # 数据库迁移
│   └── seed.sql             # 初始数据
├── package.json
├── next.config.ts
├── tailwind.config.js
└── tsconfig.json
```

## 🎯 核心功能模块

### 👥 用户管理模块
- **用户注册/登录**
- **个人资料管理**
- **家庭成员邀请**
- **权限角色管理**

### 📝 内容管理模块
- **文章发布与编辑**
- **图片/视频上传**
- **分类标签系统**
- **内容搜索功能**

### 🏠 家庭互动模块
- **家庭动态Timeline**
- **评论与点赞**
- **家庭相册**
- **重要日期提醒**

### 📊 数据统计模块
- **内容浏览统计**
- **用户活跃度**
- **家庭成员贡献度**

## 🚀 部署和运维

### 🌐 部署环境
- **生产环境：** Vercel (familyweb-five.vercel.app)
- **数据库：** Supabase (jjndttannsyfmfpgvlpc.supabase.co)
- **域名管理：** 待配置自定义域名
- **监控告警：** 集成 Vercel Analytics

### 📋 发布流程
1. **本地开发** → **Git 提交** → **推送到 GitHub**
2. **Vercel 自动构建** → **部署预览**
3. **合并到 main 分支** → **生产环境更新**

## 📞 紧急联系与回溯

### 🆘 问题排查步骤
1. **检查 Vercel 部署日志**
2. **查看 Supabase 数据库状态**
3. **回顾本文档相关规范**
4. **检查 Git 提交历史**

### 📝 更新记录
- **2025-01-12：** 初始版本，基础设施完成
- **待更新：** 后续版本更新记录

---

**📌 重要提醒：**
- 所有开发决策都应参考本文档规范
- 重大变更需要更新此文档
- 遇到问题时优先查阅本文档
- 保持文档与实际代码同步更新 